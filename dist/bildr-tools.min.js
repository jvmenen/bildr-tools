(()=>{"use strict";var o={d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},t={};o.r(t),o.d(t,{ActionTypes:()=>l,ActionsToShowEnum:()=>c,Debug:()=>r,Flows:()=>a});const e=o=>o.sort(((o,t)=>(""+o.name).localeCompare(t.name)));class n{constructor(...o){1===o.length?this.cache=BildrDBCacheGet(o[0],"","",null):2===o.length?this.cache=BildrDBCacheGet(!1,o[0],o[1],null):this.cache=BildrDBCacheGet(!0,"","",null)}get actions(){return this.cache.actions.recs}get flows(){return this.actions.filter((o=>"68"==o.type)).map((o=>new i(o,this)))}get elements(){return this.cache.elements.recs}get forms(){return this.cache.forms.recs.map((o=>new s(o,this)))}get actionTypes(){return this.cache.actionsTypes.recs}get activeForms(){return this.forms.filter((o=>0==o.deleted))}get activeFlows(){return this.flows.filter((o=>0==o.deleted))}get deletedFlows(){return this.flows.filter((o=>0!=o.deleted))}get activeFlowsGroupedByFormID(){return o=this.activeFlows,t=o=>o.formID,o.reduce(((o,e)=>{const n=t(e);return o[n]||(o[n]=[]),o[n].push(e),o}),{});var o,t}get activeElements(){return this.elements.filter((o=>0==o.deleted))}}n.createInstance=()=>new n(!0);class s{constructor(o,t){this.opts=o.opts,this.objsTree=o.objsTree,this.actions=o.actions,this.deleted=o.deleted,this.name=o.name,this.id=o.id,this.bildrCache=t}get activeFlows(){return this.bildrCache.activeFlowsGroupedByFormID[this.id.toString()]||Array()}}class i{constructor(o,t){this.opts=o.opts,this.formID=o.formID,this.type=o.type,this.deleted=o.deleted,this.name=o.name,this.id=o.id,this.bildrCache=t}get actions(){return class{static getActions(o,t){let e=o.find((o=>"actionsArray"==o.name));if(!e)return Array();let n=e;return n.value?t.actions.filter((o=>{var t;return!!(null===(t=n.value)||void 0===t?void 0:t.find((t=>t.id==o.id)))})):Array()}}.getActions(this.opts.arguments,this.bildrCache)}}class l{static findUsage(o){let t=n.createInstance();function s(o){console.log(o)}let i=t.actionTypes.find((t=>t.id==o));i?(s(`Action Type "${i.name}" is called by:`),s(""),t.activeForms.forEach((t=>{let n=!1;e(t.activeFlows).forEach((e=>{e.actions.forEach((i=>{i.type==o&&(n||(n=!0,s("Form : "+t.name)),s(`  Flow : ${e.name} (id: ${e.id})`),s("    Action : "+i.name))}))}))})),s(""),s("THAT'S IT!")):s(`Couldn't find Action Type ${o} in project!`)}}var c;!function(o){o[o.Flows=1]="Flows",o[o.Actions=2]="Actions",o[o.BildrActions=4]="BildrActions",o[o.MouseActions=8]="MouseActions"}(c||(c={}));class r{static ShowAllVariables(){!function o(t){t&&t.form&&t.form.name&&console.log(`Variables of Page: ${t.form.name}`);let e=t._vars;e&&(console.log(e),t.cBrwForms&&t.cBrwForms.forEach((t=>{o(t)})))}(brwFormRoot)}static Start(o){window.orgQAFunc||(window.orgQAFunc=QueueAction),window.QueueAction=function(t,e,s,i,l,a,d,u,f){let h=(r.ActionsToShow&c.Flows)===c.Flows,g=(r.ActionsToShow&c.Actions)===c.Actions,m=(r.ActionsToShow&c.BildrActions)===c.BildrActions,p=(r.ActionsToShow&c.MouseActions)===c.MouseActions;if(t){let e="V3gKt5FZRECIDMudjBbi3g"==t.id||"AGTUwIokUuQgXEgNW6mnA"==t.id||"CAGTUwIokUuQgXEgNW6mnA"==t.id,s="68"==t.type;if(e&&p||s&&h||!e&&!s&&g){let e;if(t.id&&!m&&(e=n.createInstance().actions.find((o=>o.id==t.id))),null!=e||m){let e=s?"Flow  ":"Action",n=s?"":"  --";console.log(`${e}: ${t.id} ${n}  "${t.name}"`),(r._StepMode||o&&t.id==o)&&(r._StepMode=!0)}}}window.orgQAFunc.call(this,t,e,s,i,l,a,d,u,f)},window.QueueAction.prototype=window.orgQAFunc.prototype,window.QueueAction.prototype.constructor=QueueAction}static Stop(){window.orgQAFunc&&(window.QueueAction=window.orgQAFunc)}static StepModeOff(){r._StepMode=!1}}r._StepMode=!1,r.ActionsToShow=c.Flows;class a{static findUnusedFlows(o=!0){let t=n.createInstance();const s=e(t.activeForms);console.log(`Check ${t.actions.length} flows. This might take a few seconds...`),console.log("You'll see a mesage when checking is finished."),console.log(""),o?console.log("Looking for Unused flows (skipping unused 'Auto Save')"):console.log("Looking for All unused flows"),console.log(""),s.forEach((n=>{if(!n.actions)return;let s=t.activeFlowsGroupedByFormID[n.id];if(s){let t=!1;e(s).forEach((e=>{o&&e.name.includes("Auto Save")||0==a.findUsageOfFlow(e.id,!1)&&(t||(t=!0,console.log("Form : "+n.name)),console.log("  Flow : "+e.name))}))}})),console.log(""),console.log("THAT'S IT!")}static findUsageOfFlow(o,t=!0){let s=n.createInstance();const i=o.toString();let l=!1;function c(o){t&&console.log(o)}let r=s.activeFlows.find((t=>t.id==o));if(!r)return c(`Couldn't find flowID ${o} in project!`),!1;{let t=s.forms.find((o=>r&&o.id==r.formID));c(t?`Flow "${r.name}" on form "${t.name}" is called by:`:`Couldn't find form for flowID ${o} in project!`),c("")}return s.activeForms.forEach((o=>{var t,n,r,a,d,u;if(!o.actions)return;let f=s.activeFlowsGroupedByFormID[o.id];if(!f)return;let h=!1;e(f).forEach((t=>{var e;if(new Array,t.opts&&t.opts.arguments){let n=t.opts.arguments.find((o=>"actionsArray"==o.name));n&&(null===(e=n.value)||void 0===e||e.forEach((e=>{let n=e.id&&e.id.toString().endsWith(i);if(n&&(l=!0,h||(h=!0,c("Form : "+o.name)),c(`  Flow : ${t.name} (id: ${t.id})`),c("    as nested flow")),!n){let n=s.actions.find((o=>o.id==e.id));if(n&&n.opts&&n.opts.arguments&&Array.isArray(n.opts.arguments)){let e=n.opts.arguments.find((o=>o.type&&"static.actions"==o.type));e&&e.value.endsWith(i)&&(l=!0,h||(h=!0,c("Form : "+o.name)),c(`  Flow : ${t.name} (id: ${t.id})`),c("    Action : "+(null==n?void 0:n.name)))}}})))}}));let g=Array();!function o(t){null!=t&&t.forEach((t=>{o(t.items),g.push(t)}))}(o.objsTree),e(g).forEach((t=>{t.opts&&t.opts.events&&t.opts.events.filter((o=>o.actID&&o.actID.toString().endsWith(i))).forEach((e=>{l=!0,h||(h=!0,c("Form : "+o.name)),c("  Element : "+t.name),c("    Event : "+e.code)}))}));let m=[];if((null===(t=o.opts.autoSaveActionID)||void 0===t?void 0:t.toString().endsWith(i))&&m.push("Auto-Save Flow"),(null===(n=o.opts.onLoadAct)||void 0===n?void 0:n.toString().endsWith(i))&&m.push("Page Load Flow"),(null===(r=o.opts.notConnectedActID)||void 0===r?void 0:r.toString().endsWith(i))&&m.push("Flow to run when connection is lost"),(null===(a=o.opts.reConnectedActID)||void 0===a?void 0:a.toString().endsWith(i))&&m.push("Flow to run when connection is re-established"),(null===(d=o.opts.notAuthenticatedActID)||void 0===d?void 0:d.toString().endsWith(i))&&m.push("Flow to run when authentication is lost"),(null===(u=o.opts.newRevisionActID)||void 0===u?void 0:u.toString().endsWith(i))&&m.push("Flow to Run When Revision is Out of Date"),m.length>0&&(l=!0,c("Form : "+o.name),c("  Element : Page Body"),m.forEach((o=>{c("    Event : "+o)}))),o.opts.resonanceDataListeners){let t=o.opts.resonanceDataListeners.filter((o=>o.actID&&o.actID.toString().endsWith(i)));t.length>0&&(l=!0,c("Form : "+o.name),c("  Element : Page Body"),c(`    Used by ${t.length} Data Listener(s)`))}})),c(""),c("THAT'S IT!"),l}static findUsageOfDeletedFlows(){let o=n.createInstance();function t(t){return null!=o.deletedFlows.find((o=>o.id.toString().endsWith(t.toString())))}o.activeFlows.forEach((e=>{var n;if(e.opts&&e.opts.arguments){let s=e.opts.arguments.find((o=>"actionsArray"==o.name));s&&(null===(n=s.value)||void 0===n||n.forEach((n=>{if(n.id&&t(n.id)){let t=o.forms.find((o=>o.id==e.formID));if(t){console.log(`Form : ${t.name}`),console.log(`  Flow : ${e.name} (id: ${e.id})`);const s=o.deletedFlows.find((o=>o&&o.id.toString().endsWith(n.id.toString())));console.log(s)}}else{let s=o.actions.find((o=>o.id==n.id));if(s&&s.opts&&s.opts.arguments&&s.opts.arguments.find((o=>o.type&&"static.actions"==o.type&&o.value&&t(o.value)))){let t=o.forms.find((o=>o.id==e.formID));t&&(console.log(`Form : ${t.name}`),console.log(`  Flow : ${e.name} (id: ${e.id})`),console.log(`    Action : ${s.name}`))}}})))}})),o.activeForms.forEach((n=>{var s=Array();!function o(t){null!=t&&t.forEach((t=>{o(t.items),s.push(t)}))}(n.objsTree),e(s).forEach((e=>{e.opts&&e.opts.events&&e.opts.events.filter((o=>o.actID&&t(o.actID))).forEach((t=>{let n=o.forms.find((o=>o.id==e.formID));n&&(console.log("Form : "+n.name),console.log("  Element : "+e.name),console.log("    Event : "+t.code))}))}));let i=[];if(n.opts&&(n.opts.autoSaveActionID&&t(n.opts.autoSaveActionID)&&i.push("Auto-Save Flow"),n.opts.onLoadAct&&t(n.opts.onLoadAct)&&i.push("Page Load Flow"),n.opts.notConnectedActID&&t(n.opts.notConnectedActID)&&i.push("Flow to run when connection is lost"),n.opts.reConnectedActID&&t(n.opts.reConnectedActID)&&i.push("Flow to run when connection is re-established"),n.opts.notAuthenticatedActID&&t(n.opts.notAuthenticatedActID)&&i.push("Flow to run when authentication is lost"),n.opts.newRevisionActID&&t(n.opts.newRevisionActID)&&i.push("Flow to Run When Revision is Out of Date"),i.length>0&&(console.log("Form : "+n.name),console.log("  Element : Page Body"),i.forEach((o=>{console.log("    Event : "+o)}))),n.opts.resonanceDataListeners)){let o=n.opts.resonanceDataListeners.filter((o=>o.actID&&t(o.actID)));o.length>0&&(console.log("Form : "+n.name),console.log("  Element : Page Body"),console.log(`    Used by ${o.length} Data Listener(s)`))}})),console.log(""),console.log("THAT'S IT!")}static getFlowWithActions(o){var t;let e=n.createInstance(),s=e.activeFlows.find((t=>t.id&&t.id.toString()==o));if(null!=s){if(console.log("Flow found:"),console.log(s),console.log("Actions:"),s.opts&&s.opts.arguments){let o=s.opts.arguments.find((o=>"actionsArray"==o.name));o&&(null===(t=o.value)||void 0===t||t.forEach((o=>{let t=e.actions.find((t=>t.id.toString()==o.id.toString()));t&&console.log(t)})))}}else console.log("flow not found")}}window.BildrTools=t})();