{"version":3,"file":"bildr-marketplace.js","mappings":"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","sources":["webpack://Bildr/webpack/universalModuleDefinition","webpack://Bildr/./src/plugin/BildrPluginBase.ts","webpack://Bildr/./src/plugin/BildrPluginManager.ts","webpack://Bildr/webpack/bootstrap","webpack://Bildr/webpack/runtime/define property getters","webpack://Bildr/webpack/runtime/hasOwnProperty shorthand","webpack://Bildr/webpack/runtime/make namespace object","webpack://Bildr/./src/bildr-marketplace-plugin-v1.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Bildr\"] = factory();\n\telse\n\t\troot[\"Bildr\"] = root[\"Bildr\"] || {}, root[\"Bildr\"][\"marketplace\"] = factory();\n})(self, () => {\nreturn ","\r\n/**\r\n * @public\r\n */\r\nexport interface BildrPluginAction {\r\n    get name(): string;\r\n    execFunc(args: any): any;\r\n}\r\n\r\n/**\r\n * @public\r\n */\r\nexport class BildrPluginBase {\r\n    private _name: string;\r\n    private _pageUrl: string;\r\n    private _frameId: string;\r\n    private _divElem!: HTMLDivElement;\r\n    private _divId: string;\r\n    private _actions: BildrPluginAction[] = []\r\n\r\n    constructor(name: string, pageUrl: string) {\r\n        this._name = name;\r\n        this._pageUrl = pageUrl;\r\n        this._divId = Math.random().toString(16).slice(2);\r\n        this._frameId = Math.random().toString(16).slice(2);\r\n    }\r\n\r\n    public get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    protected get divElem(): HTMLDivElement {\r\n        return this._divElem;\r\n    }\r\n    public isSameDivElem(divElem: HTMLDivElement) {\r\n        return this._divElem === divElem;\r\n    }\r\n\r\n    protected sendOutgoingMessage(msgId: string, result: any) {\r\n        var window = (document.getElementById(this._frameId) as HTMLIFrameElement).contentWindow;\r\n        window!.postMessage({\r\n            \"msgId\": msgId,\r\n            \"result\": result\r\n        }, \"*\");\r\n\r\n    }\r\n\r\n    public triggerAction(actionName: string, actionData: any) {\r\n        if (actionData.uMsgId == undefined || actionData.uMsgId == null || actionData.uMsgId == \"\") {\r\n            throw new Error(\"uMsgId should be set on argument actionData\");\r\n        }\r\n\r\n        let action = this._actions.find(item => item.name == actionName)\r\n        if (action == undefined) {\r\n            throw new Error(`Unknown action '${actionName}' on plugin '${this.name}'`);\r\n        }\r\n        let result = action.execFunc(actionData)\r\n        if (result) {\r\n            this.sendOutgoingMessage(actionData.uMsgId, result)\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public hide() {\r\n        this._divElem.style.right = \"-400px\";\r\n    }\r\n\r\n    public show() {\r\n        this._divElem.style.width = '400px';\r\n        this._divElem.style.right = '0px';\r\n    }\r\n\r\n    toggleVisibility() {\r\n        if (this.isVisible) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    }\r\n\r\n    public get isVisible() {\r\n        return this._divElem.style.right == '0px';\r\n    }\r\n\r\n    protected get document(): Document {\r\n        return window.document;\r\n    }\r\n\r\n    public renderPage() {\r\n        if (!this._divElem) {\r\n            // CREATE plugin div/iframe\r\n            let elem = this.document.createElement('div');\r\n            elem.id = this._divId;\r\n            elem.style.cssText = \"width:0px;height:100vh;top:0px;left:unset;right:-400px;bottom:unset;border:none;background:#ffffff;position: fixed;z-index: 100010;overflow: hidden;position:absolute;transition: right 300ms ease-in-out 0s;\";\r\n            elem.innerHTML = `<iframe id='${this._frameId}' src='${this._pageUrl}' style='all:unset;width:100%;height:100%'></iframe>`;\r\n            // add to document (right side)\r\n            this.document.body.appendChild(elem);\r\n\r\n            // Animation end handler\r\n            elem.addEventListener('transitionend', _e => {\r\n                // when the animation is finished, \"hide\" it when out of view\r\n                // prevents UI issues when the Studio canvas is scaled\r\n                if (elem.style.right != '0px') { elem.style.width = '0px'; }\r\n            });\r\n\r\n            this._divElem = elem;\r\n        }\r\n    }\r\n\r\n    public remove() {\r\n        this.document.body.removeChild(this._divElem);\r\n    }\r\n\r\n    public addActionObject(action: BildrPluginAction) {\r\n        this.addAction(action.name, action.execFunc);\r\n    }\r\n\r\n    public addAction(actionName: string, execFnc: Function) {\r\n        this._actions.push(new SimplePluginAction(actionName, execFnc));\r\n    }\r\n}\r\n\r\nclass SimplePluginAction implements BildrPluginAction {\r\n    public name: string;\r\n    private _execFunc: Function;\r\n\r\n    constructor(actionName: string, execFunc: Function) {\r\n        this.name = actionName;\r\n        this._execFunc = execFunc;\r\n    }\r\n\r\n    execFunc(args: any): any {\r\n        return this._execFunc(args);\r\n    }\r\n}\r\n","import { BildrPluginBase } from \"./BildrPluginBase\";\r\n\r\n/**\r\n * @public\r\n */\r\nexport class BildrPluginManager {\r\n    static _instance: BildrPluginManager;\r\n\r\n    private _registeredPlugins: BildrPluginBase[] = [];\r\n\r\n    constructor() { }\r\n\r\n    public register(plugin: BildrPluginBase) {\r\n        if (plugin.name == undefined || plugin.name == null || plugin.name.trim().length == 0) {\r\n            throw new Error(\"Name is required to register a plugin.\");\r\n        }\r\n        if (BildrPluginManager.isRegistered(plugin.name)) {\r\n            throw new Error(`Plugin with name '${plugin.name}' already registered. Name needs to be unique.`);\r\n        }\r\n\r\n        this.startListeningForMessagesFromIFrame();\r\n\r\n        this._registeredPlugins.push(plugin)\r\n        plugin.renderPage();\r\n    }\r\n\r\n    public isRegistered(pluginName: string): boolean {\r\n        return this._registeredPlugins.find(item => item.name == pluginName) != undefined\r\n    }\r\n\r\n    public remove(pluginName: string) {\r\n        let plugin = this._registeredPlugins.find(item => item.name == pluginName)\r\n        if (plugin != undefined) {\r\n            plugin.remove();\r\n            this._registeredPlugins.forEach((item, index) => {\r\n                if (item === plugin) this._registeredPlugins.splice(index, 1);\r\n            });\r\n        }\r\n    }\r\n\r\n    protected get window(): { addEventListener: (eventName: string, eventHandlerFunction: (e: any) => void) => void; } {\r\n        return window;\r\n    }\r\n\r\n    private startListeningForMessagesFromIFrame() {\r\n\r\n        if (this._registeredPlugins.length != 0) return;\r\n\r\n        this.window.addEventListener(\"message\", e => {\r\n            this.triggerActionInPlugin(e);\r\n        });\r\n    }\r\n\r\n    private triggerActionInPlugin(e: any) {\r\n        if (!e.data) return;\r\n\r\n        let dataJson = e.data as BildrPluginData;\r\n\r\n        let plugin = this._registeredPlugins.find(item => dataJson.pluginName && item.name == dataJson.pluginName);\r\n\r\n        if (plugin == undefined) return;\r\n\r\n        if (dataJson.data == undefined) dataJson.data = {};\r\n        dataJson.data.uMsgId = dataJson.uMsgId;\r\n\r\n        plugin.triggerAction(dataJson.command, dataJson.data);\r\n    }\r\n\r\n    // STATIC FUNCTIONS\r\n    static getInstance(): BildrPluginManager {\r\n        if (this._instance == undefined) {\r\n            this._instance = new BildrPluginManager()\r\n        }\r\n        return this._instance\r\n    }\r\n    static remove(pluginName: string) {\r\n        this.getInstance().remove(pluginName)\r\n    }\r\n\r\n    static isRegistered(pluginName: string): boolean {\r\n        return this.getInstance().isRegistered(pluginName)\r\n    }\r\n\r\n    static register(plugin: BildrPluginBase) {\r\n        this.getInstance().register(plugin)\r\n    }\r\n}\r\n\r\ntype BildrPluginData = {\r\n    pluginName: string,\r\n    command: string,\r\n    uMsgId: string,\r\n    data: any\r\n}\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { BildrPluginBase, BildrPluginAction } from \"./plugin/BildrPluginBase\";\r\nimport { BildrPluginManager } from './plugin/BildrPluginManager';\r\n\r\nexport class MarketplacePlugin extends BildrPluginBase {\r\n    private Version = \"2\";\r\n\r\n    constructor() {\r\n        super(\"marketplace\", \"https://marketplace.bildr.com/BE\")\r\n        this.addAction(\"hideMarketplacePlugin\", () => { this.hide(); return undefined });\r\n        this.addAction(\"getMarketPlaceVersion\", () => { return this.Version });\r\n\r\n        this.addAction(\"getProjectActionTypes\", () => { return BildrAPIHelper.getProjectActionTypes() });\r\n        this.addAction(\"getProjectFunctions\", () => { return BildrAPIHelper.getProjectFunctions(); });\r\n        this.addAction(\"getProjectPreviewId\", () => { return BildrAPIHelper.getProjectPreviewId(); });\r\n\r\n        this.addActionObject(new getActionTypeByMarketplaceIdAction());\r\n        this.addActionObject(new addActionTypeWithFunctionsAction(this.sendOutgoingMessage));\r\n        this.addActionObject(new updateActionTypeWithFunctionsAction(this.sendOutgoingMessage));\r\n\r\n        this.addActionObject(new imageUrlToBase64Action(this.sendOutgoingMessage));\r\n    }\r\n\r\n    protected override sendOutgoingMessage(msgId: string, result: any) {\r\n        // Maybe this can be simplified since result is always success and\r\n        // message contained the action name but never gets used I think.\r\n        // But that requires also changes in the Marketplace plugin Website in \r\n        // all places where data is received an processed.... not easy to find where.\r\n        var marketplaceResult = {\r\n            \"result\": \"succes\",\r\n            \"message\": \"\",  // was this needed anyway in the marketplace?\r\n            \"data\": result\r\n        }\r\n        super.sendOutgoingMessage(msgId, marketplaceResult)\r\n    }\r\n}\r\n\r\ntype sendOutgoingMessage = (msgId: string, result: any) => void;\r\n\r\nclass getActionTypeByMarketplaceIdAction implements BildrPluginAction {\r\n\r\n    get name(): string {\r\n        return \"getActionTypeByMarketplaceId\";\r\n    }\r\n\r\n    public execFunc(args: any) {\r\n        let projectActionTypes = BildrAPIHelper.getProjectActionTypes();\r\n\r\n        var returnVal = projectActionTypes.find((act: actionType): boolean => {\r\n            return (act.opts.marketplace?.actionTypeID == args.actionTypeId)\r\n        })\r\n        return returnVal;;\r\n    }\r\n}\r\n\r\nclass updateActionTypeWithFunctionsAction implements BildrPluginAction {\r\n\r\n    private _sendMessageFunc: sendOutgoingMessage;\r\n\r\n    // static addActionTypeWithFunctions(msgId: string);\r\n    constructor(sendMessageFunc: sendOutgoingMessage) {\r\n        this._sendMessageFunc = sendMessageFunc\r\n    }\r\n    get name(): string {\r\n        return \"updateActionTypeWithFunctions\";\r\n    }\r\n\r\n    execFunc(data: any) {\r\n\r\n        for (var index = 0; index < data.functions.length; index++) {\r\n            var functData = data.functions[index];\r\n            let stateData = {\r\n                \"last\": index + 1 == data.functions.length\r\n            }\r\n            var dataToSave = {\r\n                \"id\": functData.id,\r\n                \"opts\": functData.opts\r\n            }\r\n            BildrAPIHelper.saveFiltersetRecord(\"7\", dataToSave, stateData, (_returnData: any, stateData: { last: boolean; }) => {\r\n\r\n                // Is this the last function added to the project?\r\n                if (stateData.last) {\r\n\r\n                    BildrAPIHelper.saveFiltersetRecord(\"16\", data.actionTypeJson, null, (returnData: any) => {\r\n                        this._sendMessageFunc(data.msgId, returnData)\r\n                    });\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nclass addActionTypeWithFunctionsAction implements BildrPluginAction {\r\n    private _sendMessageFunc: sendOutgoingMessage;\r\n\r\n    // static addActionTypeWithFunctions(msgId: string);\r\n    constructor(sendMessageFunc: sendOutgoingMessage) {\r\n        this._sendMessageFunc = sendMessageFunc\r\n    }\r\n\r\n    get name(): string {\r\n        return \"getActionTypeByMarketplaceId\";\r\n    }\r\n\r\n    public execFunc(data: any) {\r\n        // * add some extra info to replace the original function Id by new function Id in \r\n        //   the actionType.functions array\r\n        // * data contains the json object data to store\r\n        var functionsArr = data.functions.map((funct: functon) => {\r\n            let returnData: convertFunction = {\r\n                \"originalId\": funct.id,\r\n                \"newId\": \"0\",\r\n                \"data\": {\r\n                    \"id\": 0,\r\n                    \"type\": funct.type,\r\n                    \"name\": funct.name,\r\n                    \"opts\": funct.opts,\r\n                    \"JsCode\": funct.JsCode,\r\n                }\r\n            }\r\n            return returnData;\r\n        });\r\n\r\n        // Add functions to the Bildr Project by putting them on the queue\r\n        // when the last function is added to the Bildr project \r\n        // replace all originalId by their newId in actionType.functions\r\n        // and save the actionType\r\n        for (var index = 0; index < functionsArr.length; index++) {\r\n            var funct = functionsArr[index];\r\n            let stateData = {\r\n                \"index\": index,\r\n                \"last\": index + 1 == functionsArr.length\r\n            }\r\n            BildrAPIHelper.saveFiltersetRecord(\"7\", funct.data, stateData, (returnData: { recs: { id: string; }[]; }, stateData: { index: number; last: boolean; }) => {\r\n                // remember the newly created function id\r\n                let index = stateData.index;\r\n                functionsArr[index].newId = returnData.recs[0].id;\r\n\r\n                // Is this the last function added to the project?\r\n                if (stateData.last) {\r\n                    // update ids of actionType.functions\r\n                    functionsArr.forEach((fnc: convertFunction) => {\r\n                        for (let i = 0; i < data.actionTypeJson.functions.length; i++) {\r\n                            if (data.actionTypeJson.functions[i].id == fnc.originalId) {\r\n                                data.actionTypeJson.functions[i].id = fnc.newId;\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    // add actionType\r\n                    var actionTypeJson = {\r\n                        \"id\": 0,\r\n                        \"name\": data.actionTypeJson.settings.displayName,\r\n                        \"opts\": data.actionTypeJson\r\n                    }\r\n\r\n                    BildrAPIHelper.saveFiltersetRecord(\"16\", actionTypeJson, null, (returnData: any) => {\r\n                        this._sendMessageFunc(data.msgId, returnData)\r\n                    });\r\n\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nclass imageUrlToBase64Action implements BildrPluginAction {\r\n    private _sendMessageFunc: sendOutgoingMessage;\r\n\r\n    // static addActionTypeWithFunctions(msgId: string);\r\n    constructor(sendMessageFunc: sendOutgoingMessage) {\r\n        this._sendMessageFunc = sendMessageFunc\r\n    }\r\n\r\n    get name(): string {\r\n        return \"imageUrlToBase64\";\r\n    }\r\n    execFunc(data: any) {\r\n        this.imageUrlToBase64(data.iconUrl, (dataUrl: string) => {\r\n            this._sendMessageFunc(data.msgId, dataUrl);\r\n        })\r\n        return undefined;\r\n    }\r\n\r\n    private imageUrlToBase64(src: string, callback: Function): void {\r\n        var img = new Image();\r\n        img.crossOrigin = 'Anonymous';\r\n        img.onload = function () {\r\n\r\n            const MAX_WIDTH = 30;\r\n            const MAX_HEIGHT = 30;\r\n            let width = img.naturalHeight;\r\n            let height = img.naturalHeight;\r\n\r\n            // Change the resizing logic\r\n            if (width > height) {\r\n                if (width > MAX_WIDTH) {\r\n                    height = height * (MAX_WIDTH / width);\r\n                    width = MAX_WIDTH;\r\n                }\r\n            } else {\r\n                if (height > MAX_HEIGHT) {\r\n                    width = width * (MAX_HEIGHT / height);\r\n                    height = MAX_HEIGHT;\r\n                }\r\n            }\r\n\r\n            // create canvas to draw on\r\n            let canvas = document.createElement('CANVAS') as HTMLCanvasElement;\r\n            let ctx = canvas.getContext('2d');\r\n\r\n            // set size and draw\r\n            canvas.height = height;\r\n            canvas.width = width;\r\n\r\n            //ctx.mozImageSmoothingEnabled = false;\r\n            //ctx.webkitImageSmoothingEnabled = false;\r\n            //ctx.msImageSmoothingEnabled = false;\r\n            //ctx.imageSmoothingEnabled = false;\r\n\r\n            ctx!.drawImage(img, 0, 0, width, height);\r\n\r\n            // Encode the resized image to bas64 png\r\n            let dataURL = canvas.toDataURL(\"image/png\");\r\n\r\n            // return result\r\n            callback(dataURL);\r\n        };\r\n        img.src = src;\r\n        if (img.complete || img.complete === undefined) {\r\n            img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\r\n            img.src = src;\r\n        }\r\n    }\r\n\r\n}\r\n\r\ntype convertFunction = {\r\n    \"originalId\": string | number,\r\n    \"newId\": string,\r\n    \"data\": functon\r\n}\r\n\r\nclass BildrAPIHelper {\r\n\r\n    static saveFiltersetRecord(filtersetID: string, dataToSave: any, stateData: any, afterOnSucces: Function) {\r\n\r\n        // create custom action to execute RecordSave\r\n        var act = new Action(0, 0, 0, \"BildrAPIHelper adding filterset: \" + dataToSave.filtersetID, '', '');\r\n        act.exec = function (qa: any) {\r\n\r\n            var jsonData = parseStrAsJson(dataToSave)\r\n\r\n            var onSucces = function (data: any, message: string) {\r\n                data.recs.forEach((rec: any) => {\r\n                    if (rec.ERROR && rec.ERROR == true) {\r\n                        console.log(\"ERROR IN: BildrAPIHelper.saveFiltersetRecord.onSucces\");\r\n                        console.log(\"message: \" + JSON.stringify(message));\r\n                        console.log(data);\r\n                    }\r\n                })\r\n                QueueExecNextActions(qa);\r\n                if (afterOnSucces) {\r\n                    afterOnSucces(data, stateData);\r\n                }\r\n            };\r\n            var onError = function (data: any, message: string) {\r\n                console.log(\"ERROR IN: BildrAPIHelper.saveFiltersetRecord.onError\");\r\n                console.log(\"message: \" + JSON.stringify(message));\r\n                console.log(data);\r\n                QueueExecNextActions(qa);\r\n            };\r\n\r\n            RecordSave(jsonData, filtersetID, qa, onSucces, onError, null, null);\r\n        }\r\n\r\n        // add action to the Queue\r\n        BildrAPIHelper.addToActionQueue2(act);\r\n    }\r\n\r\n    static addToActionQueue2(action: Action) {\r\n        var _brObj = brwFormRoot.brObj;\r\n        var _brForm = brwFormRoot;\r\n\r\n        var qaBildrCache = null;\r\n\r\n        var qa2 = new (QueueAction as any)(action, 1, null, _brObj, {\r\n            \"brwObj\": _brObj,\r\n            \"brwForm\": _brForm,\r\n            \"event\": null\r\n        }, null, null, qaBildrCache, 1);\r\n    }\r\n\r\n    static getProjectActionTypes() {\r\n        let cache = BildrDBCacheGet(true);\r\n        let actionTypes = cache.actionsTypes.recs.filter((at: actionType) => {\r\n            // Only when \r\n            // Not Archived\r\n            // Not a core action type\r\n            return (at.opts.archived == false && (!at.opts.coreType || at.opts.coreType * 1 == 0));\r\n        });\r\n\r\n        // should there be some mapping done here to prevent problems in the future (see getProjectFunctions)\r\n\r\n        return actionTypes;\r\n\r\n    }\r\n    static getProjectFunctions() {\r\n        let cache = BildrDBCacheGet(true);\r\n\r\n        // Only when \r\n        // Not Deleted\r\n        // ** if archived needs filtering then filter on: opts.archived (1 = archived)\r\n        // ** seems to only be their when archive (no = 0)\r\n        let functions = cache.functions.recs.filter((funct: functon) => {\r\n            return (!funct.deleted || funct.deleted * 1 == 0)\r\n        })\r\n\r\n        // Need to map because the javascript functions in a function object can't be\r\n        // deep copied/cloned and crash the PostMessage to the iFrame.\r\n        functions = functions.map((funct: functon) => {\r\n            let returnData = {\r\n                \"id\": funct.id,\r\n                \"JsCode\": funct.JsCode,\r\n                \"modifiedDate\": funct.modifiedDate,\r\n                \"name\": funct.name,\r\n                \"opts\": funct.opts,\r\n                \"type\": funct.type\r\n            }\r\n            return returnData;\r\n        });\r\n        return functions;\r\n    }\r\n\r\n    static getProjectPreviewId() {\r\n        let id = location.href.split(\"=\");\r\n        return id[1];\r\n    }\r\n\r\n}\r\n\r\nclass MarketplaceMenuBarButton {\r\n    static marketplaceMenuItemDivId = \"bildrMarketplaceMenuItem\";\r\n    static topMenuBarDivCss = \"css_V9oRPFpIjEqGDrWGUv9yWg\";\r\n\r\n    static isTopBarAvailable() {\r\n        return document.querySelector(`.${MarketplaceMenuBarButton.topMenuBarDivCss}`);\r\n    }\r\n\r\n    static create() {\r\n        if (!document.getElementById(MarketplaceMenuBarButton.marketplaceMenuItemDivId)) {\r\n            // init page for smooth sliding in and not seeing the page load\r\n            let plugin = new MarketplacePlugin();\r\n            BildrPluginManager.register(plugin)\r\n\r\n            // Make some space in the menu bar\r\n            var topMenuBar = document.querySelector(`.${MarketplaceMenuBarButton.topMenuBarDivCss}`) as HTMLDivElement;\r\n            topMenuBar.style.width = \"520px\";\r\n\r\n            // CREATE menu bar item\r\n            var elem = document.createElement(\"div\");\r\n            elem.id = MarketplaceMenuBarButton.marketplaceMenuItemDivId;\r\n            elem.className = \"css_BRQAelSiDkOyetXlS0VDMQ\";\r\n            elem.innerHTML = \"<img src='https://documents-weu.bildr.com/r9f576480f5ba4b118cec7ce8e6c345e3/doc/Bildr marketplace logo WB color.ynHqabhunkG6oesIc3Xzvg.png' class='css_0EWldTyzqU60XwJWKjRXog' style='filter:none;'><p class='css_BzJ7ABkWfkeHKsQbcZKVbA css_ixReGSYmjkKU0b6bxZNTHw'>market</p>\";\r\n            // add to top menu bar\r\n            topMenuBar.appendChild(elem);\r\n\r\n            // Handle click on button, inside the plugin or outside the plugin (auto hide)\r\n            // Mind the config param capture: true on the addEventListener\r\n            document.body.addEventListener('click', e => {\r\n\r\n                let marketplacePage = new MarketplacePlugin()\r\n                var target = (e && e.target);\r\n                // assume the click is outside the plugin / div\r\n                let action = \"hide\";\r\n\r\n                while ((target as HTMLElement).parentNode) {\r\n\r\n                    // Ignore click inside the plugin / div\r\n                    if (plugin.isSameDivElem(target as HTMLDivElement)) {\r\n                        action = \"\";\r\n                        break;\r\n                    }\r\n                    // Handles click on Marketplace button (and image and tekst)\r\n                    if (target && (target as HTMLElement).id == MarketplaceMenuBarButton.marketplaceMenuItemDivId) {\r\n                        action = \"toggle\";\r\n                        break;\r\n                    }\r\n                    target = (target as HTMLElement).parentNode;\r\n                }\r\n\r\n                if (action == \"hide\") { marketplacePage.hide(); }\r\n                if (action == \"toggle\") { marketplacePage.toggleVisibility(); }\r\n            }, { capture: true })\r\n\r\n        }\r\n    }\r\n}\r\n\r\nvar onStudioLoadObservers = [];\r\n// set up marketplace button as soon as top bar is available\r\nonStudioLoadObservers.push(new MutationObserver(function (_mutations, me) {\r\n    // `me` is the MutationObserver instance\r\n\r\n    if (MarketplaceMenuBarButton.isTopBarAvailable()) {\r\n        // stop observing\r\n        me.disconnect();\r\n\r\n        MarketplaceMenuBarButton.create();\r\n    }\r\n}))\r\n\r\n// prevent running this script when not in Bildr Studio\r\nif (location.href.indexOf(\"https://www.bildr.com/studio?projectName=\") != -1) {\r\n    // start observing\r\n\r\n    onStudioLoadObservers.forEach(observer => {\r\n        observer.observe(document, {\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n    });\r\n}"],"names":[],"sourceRoot":""}